<div ng-if="loading">
	<div layout="row" layout-sm="column" layout-align="space-around">
		<md-progress-circular md-diameter="100" md-mode="indeterminate"></md-progress-circular>
	</div>
</div>
<md-content  ng-if="!loading" ng-cloak layout-padding> <!-- <h3 class="md-headline">Salary Master</h3> -->

<form name="SalaryMasterform" layout="column">

	<md-toolbar class="md-table-toolbar md-default">
	<div class="md-toolbar-tools">
		<span>Employee Salary Master List</span>
		<div flex></div>
		<section layout="row" layout-align="end end" flex>
			<md-button class="md-icon-button" id="uplodeExcel"
				ng-click="UplodeExcel($event)"> <ng-md-icon
				icon="file_upload" style="fill: md-default" size="24">
			<md-tooltip>Upload CSV Data</md-tooltip></ng-md-icon></md-button>
			<md-button class="md-icon-button" id="downloadExcel"
				ng-click="downloadData()"> <ng-md-icon
				icon="file_download" style="fill: md-default" size="24">
			<md-tooltip>Download CSV Data</md-tooltip></ng-md-icon></md-button>
			<md-button class="md-icon-button" id="refreshIcon"
				ng-click="refreshListPage()"> <ng-md-icon icon="refresh"
				style="fill: md-default" size="24"> <md-tooltip>Refresh
			List</md-tooltip></ng-md-icon></md-button>

		</section>
	</div>
	</md-toolbar>
	<div ng-cloak>
		<table md-data-table md-progress="deferred">
			<thead md-order="query.order" md-trigger="onOrderChange">
				<tr>
					<th name="Employee Name"
						style="margin: 0; padding-left: 0; padding-right: 5px;"></th>
					<th name="Monthly Gross"
						style="margin: 0; padding-left: 0; padding-right: 5px;"></th>

					<th name="Basic"
						style="margin: 0; padding-left: 0; padding-right: 5px;"></th>

					<th name="HRA"
						style="margin: 0; padding-left: 0; padding-right: 5px;"></th>
					<th name="Convence"
						style="margin: 0; padding-left: 0; padding-right: 5px;"></th>
					<th name="Medical"
						style="margin: 0; padding-left: 0; padding-right: 5px;"></th>
					<th name="Education"
						style="margin: 0; padding-left: 0; padding-right: 5px;"></th>
					<th name="Adhoc Allow"
						style="margin: 0; padding-left: 0; padding-right: 5px;"></th>
					<th name="Special Allow"
						style="margin: 0; padding-left: 0; padding-right: 5px;"></th>
					<!-- <th name="Calculated Gross" style="margin: 0; padding-left: 0; padding-right: 5px;"></th> -->
				</tr>
			</thead>

			<tbody>

				<tr
					ng-repeat="empSalaryMasterObj in empSalaryMasterList | orderBy: query.order | limitTo: query.limit: (query.page - 1) * query.limit">
					<td
						style="min-width: 220px; margin: 0; padding-left: 0; padding-right: 5px;"><md-input-container
							style="margin: 0; padding: 0; padding-left: 0; padding-right: 5px;">
						<b
							ng-bind="empSalaryMasterObj.empAccount.firstName + ' ' +empSalaryMasterObj.empAccount.lastName">
						</b></md-input-container></td>


					<td style="margin: 0; padding-left: 0; padding-right: 5px;"><md-input-container
							style="margin: 0; padding: 0;"> <input
							ng-model="empSalaryMasterObj.grosssal" type="number"
							ng-change="grossSalaryChanged($index)"
							ng-model-options="{ debounce: 100 }"> </md-input-container></td>
					<td
						style="min-width: 100px; margin: 0; padding-left: 0; padding-right: 5px;"><md-input-container
							style="margin: 0; padding-left: 0; padding-right: 5px;">
						<input ng-model="empSalaryMasterObj.basic" type="number"
							ng-change="calSpecialAllow($index)"> </md-input-container></td>
					<td style="margin: 0; padding-left: 0; padding-right: 5px;"><md-input-container
							style="margin: 0; padding: 0;"> <input
							ng-model="empSalaryMasterObj.hramonthly" type="number"
							ng-change="calSpecialAllow($index)"> </md-input-container></td>
					<td style="margin: 0; padding-left: 0; padding-right: 5px;"><md-input-container
							style="margin: 0; padding: 0;"> <input
							ng-model="empSalaryMasterObj.convence" type="number"
							ng-change="calSpecialAllow($index)"> </md-input-container></td>
					<td style="margin: 0; padding-left: 0; padding-right: 5px;"><md-input-container
							style="margin: 0; padding: 0;"> <input
							ng-model="empSalaryMasterObj.medical" type="number"
							ng-change="calSpecialAllow($index)"> </md-input-container></td>
					<td style="margin: 0; padding-left: 0; padding-right: 5px;"><md-input-container
							style="margin: 0; padding: 0;"> <input
							ng-model="empSalaryMasterObj.education"
							ng-change="calSpecialAllow($index)"> </md-input-container></td>


					<td style="margin: 0; padding-left: 0; padding-right: 5px;"><md-input-container
							style="margin: 0; padding: 0;"> <input
							ng-model="empSalaryMasterObj.adhocAllow"
							ng-change="calSpecialAllow($index)"> </md-input-container></td>


					<td style="margin: 0; padding-left: 0; padding-right: 5px;"><md-input-container
							style="margin: 0; padding: 0;"> <input
							ng-model="empSalaryMasterObj.specialAllow" id="no"
							value="empSalaryMasterObj.specialAllow" readonly
							ng-style="getHighlightRedStyle(empSalaryMasterObj.specialAllow)"> </md-input-container></td>
				</tr>
			</tbody>
		</table>
	</div>

	<md-data-table-pagination md-limit="query.limit" md-page="query.page"
		md-total={{empSalaryMasterList.length}} md-trigger="onpagechange"></md-data-table-pagination>
	</md-data-table-container>

	<div>
		<md-button class="md-raised md-primary"
			ng-click="saveSalaryMasterDetailList()">Submit</md-button>

		<md-button class="md-fab md-primary md-hue-1" ng-click="download()">
		<md-tooltip>Download Salary Master</md-tooltip> <md-icon
			md-svg-icon="img/icons/pdfdownload.svg"></md-icon> </md-button>

	</div>

</form>
</md-content>